<%= render 'shared/navbar_private' %>

<div class="users-container table-container">

    <div class="table-header">
        <h1>Usuarios</h1>

        <%= link_to 'Nuevo Usuario', new_admin_user_path, class: "btn new-admin-btn" %>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Telefono</th>
                <th>Fecha de ingreso</th>
                <th>Rol</th>
                <th>Acciones</th>
            </tr>
        </thead>

        <tbody>
            <% @users.each do |user| %>
            <tr>
                <td><%= user.username %></td>
                <td><%= user.email %></td>
                <td><%= user.phone %></td>
                <td><%= user.entry_date.strftime("%d/%m/%Y") %></td>
                <td><%= user.roles.first&.name&.titleize || "Sin rol asignado" %></td>
                <td class="actions">
                    <%= link_to 'Ver', admin_user_path(user), class: "btn" %>
                    <%= link_to 'Editar', edit_admin_user_path(user), class: "btn" %>
                    <%= form_with(url: admin_user_path(user), method: :delete, local: true) do %>
                        <%= submit_tag 'Eliminar', class: "btn" %>
                    <% end %>
                </td>
            </tr>
            <% end %>
        </tbody>
    </table>

</div>
