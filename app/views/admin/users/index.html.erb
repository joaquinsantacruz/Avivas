<%= render 'shared/navbar_private' %>

<h1>Usuarios</h1>

<%= link_to 'Nuevo Usuario', new_admin_user_path, class: "btn" %>

<table>
    <thead>
        <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Entry Date</th>
            <th>Rol</th>
            <th>Acciones</th>
        </tr>
    </thead>

    <tbody>
        <% @users.each do |user| %>
        <tr>
            <td><%= user.username %></td>
            <td><%= user.email %></td>
            <td><%= user.phone %></td>
            <td><%= user.entry_date %></td>
            <td><%= user.roles.first&.name&.titleize || "Sin rol asignado" %></td>
            <td>
                <%= link_to 'Mostrar', admin_user_path(user), class: "btn" %> |
                <%= link_to 'Editar', edit_admin_user_path(user), class: "btn" %> |
                <%= form_with(url: admin_user_path(user), method: :delete, local: true) do %>
                    <%= submit_tag 'Eliminar', class: "btn" %>
                <% end %>
            </td>
        </tr>
        <% end %>
    </tbody>
</table>

